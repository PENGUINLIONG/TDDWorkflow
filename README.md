# TDDWorkflow
[![License](https://img.shields.io/badge/license-BSD-blue.svg)](LICENSE)
This repo is a workflow project which helps you extract TDD features from videos on Windows.

## TDD features
See [Wanglimin's TDD repo](https://github.com/wanglimin/TDD) for more information.

# Dependency
MATLAB: Please relocate the lib reference in `./vs/TDDWorkflowHelper/TDDWorkflowHelper.csproj`, it should be in line 31.

MATLAB toolboxes: [vlfeat/vlfeat](https://github.com/vlfeat/vlfeat) and [pdollar/toolbox](https://github.com/pdollar/toolbox). Please clone them and add:
  * `./toolbox/gmm` & `./toolbox/fisher`, for vlfeat/vlfeat;
  * `./classify`, for pdollar/toolbox;
to your MATLAB search path. (Note that vlfeat need to be compiled, its `.sln` file can be easily found)

.NET Framework: Versions of 4.5+ are recommended.

caffe: [Microsoft/caffe](https://github.com/microsoft/caffe) is recommended. Build MSCaffe following the instructions and append its `./Build/[Architecture]/[Configure]` to environment vairable PATH, and its `./Build/[Architecture]/[Configure]/matcaffe` to the search paths of MATLAB.

dense_flow: Download it [here](https://github.com/wanglimin/dense_flow). Build it and rename the output executable `dense_flow.exe`.

improved_trajectory: Download it [here](https://github.com/wanglimin/improved_trajectory). Build it and rename the output executable `improved_trajectory.exe`.

# Build
1. Clone this repository.
2. In MATLAB, set current directory to `./matlab`. Open `TddMatlabHelper.prj`. Click 'Package' in the upper-right corner to build helper lib.
3. In Visual Studio (v12.0+), open solution `TDDWorkflow.sln` in `./vs`. Press 'F6' to build the solution.

# Install
If the computer is not the one that compile it, install MCR first.
Make a copy of compiled `vl.dll` in the same directory as other executables.
Place downloaded [models](https://github.com/wanglimin/TDD#tdd-demo-code), compiled `vl.dll` (from vlfeat), `dense_flow.exe` and `improved_trajectory.exe` in the same directory as other executables.

Now TDDWorkflow is ready.

# How to use
Drag folders and drop them on each executable through 1-5 steps. The results will be stored in `Result` folders next to the videos found.
`RemoveDepthVideo` is a utility program to remove depth videos generated by Kinect, the common feature of them is that they all start with `K_`.